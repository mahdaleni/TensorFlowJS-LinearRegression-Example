<!DOCTYPE html>
<html>

<head>
   <title>Linear Regression</title>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.min.js"></script>
   <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@0.13.3/dist/tf.min.js"> </script>
</head>

<body>
   <h1>Linear Regression</h1>
   <span id="linearRegressionFrame">
      <button class='btnReset'>Reset</button>
      <button class='btnTrain'>Train</button>
      <button class='btnHalt'>Halt</button> <br />
      <canvas class="myChart" width="400" height="400" style='display:inline-block;'></canvas>
      <div style='display:inline-block;'>
         <p><strong>Learning Rate:</strong> <input type="number" class="learningRate" /></p>
         <p><strong>Iteration:</strong> <span class='iter'></span>/<input type="number" class="totalIter" />
         </p>
         <p><strong>Loss:</strong> <span class='loss'></span></p>
         <p><strong>Coefficient a = </strong> <span class='co_a'></span></p>
         <p><strong>Coefficient b = </strong> <span class='co_b'></span></p>
      </div>
      <script>
         window.addEventListener('load', function () {
            var linearRegressionFrame = document.getElementById('linearRegressionFrame');
            var linearRegressionModel = new LinearRegression(linearRegressionFrame);
            var btnTrain = linearRegressionFrame.getElementsByClassName('btnTrain')[0]
            var btnReset = linearRegressionFrame.getElementsByClassName('btnReset')[0]
            var btnHalt = linearRegressionFrame.getElementsByClassName('btnHalt')[0]
            var learningRate = linearRegressionFrame.getElementsByClassName('learningRate')[0]
            var totalIter = linearRegressionFrame.getElementsByClassName('totalIter')[0]
            learningRate.addEventListener('input', function () {
               linearRegressionModel.onLearningRateChange(this.value);
            });
            totalIter.addEventListener('input', function () {
               linearRegressionModel.onIterationNumberChange(this.value);
            });
            btnReset.addEventListener('click', function () {
               linearRegressionModel.reset();
            })
            btnTrain.addEventListener('click', function () {
               if (!linearRegressionModel.isTraining)
                  linearRegressionModel.train();
            });
            btnHalt.addEventListener('click', function () {
               linearRegressionModel.halt();
            });
            linearRegressionModel.reset();
         });
      </script>
   </span>
   <script src="./helper.js"></script>
   <script src="./LinearRegression.js"></script>
</body>

</html>